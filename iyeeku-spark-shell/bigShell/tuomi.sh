#!/usr/bin/env bash
SHELL_HOME="/home/shell"
TMP_DIR="/tmp/1"
DEST_DIR="/tmp/2"

if [ ! -d $TMP_DIR ]; then
    echo "TMP_DIR does not exist!"
    exit 1
fi

if [ ! -d DEST_DIR ]; then
    echo "DEST_DIR does not exist!"
    exit 1
fi

cp /home/data/in/20191016/PF_CODEINFO.20191016.000000.0000.dat.gz $TMP_DIR/PF_CODEINFO.20191016.000000.0000.dat.gz
cp /home/data/in/20191016/PF_CODEINFO.20191016.000000.0000.flg $DEST_DIR/PF_CODEINFO.20191016.000000.0000.flg
gzip -d $TMP_DIR/PF_CODEINFO.20191016.000000.0000.dat.gz
#awk -f $SHELL_HOME/conf/PF_CODEINFO.20191016.000000.0000.dat.awk $TMP_DIR/PF_CODEINFO.20191016.000000.0000.dat > $DEST_DIR/PF_CODEINFO.20191016.000000.0000.dat
awk -f $SHELL_HOME/conf/PF_CODEINFO.awk $TMP_DIR/PF_CODEINFO.20191016.000000.0000.dat > $DEST_DIR/PF_CODEINFO.20191016.000000.0000.dat
gzip -9 $DEST_DIR/PF_CODEINFO.20191016.000000.0000.dat
rm -rf $TMP_DIR/PF_CODEINFO.20191016.000000.0000.dat
